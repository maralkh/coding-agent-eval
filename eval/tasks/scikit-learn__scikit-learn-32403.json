{
  "id": "scikit-learn__scikit-learn-32403",
  "repo": "scikit-learn/scikit-learn",
  "base_commit": "a02f94c27a30f1c16ab9d4c275ded10d46797c97",
  "issue_number": 1234,
  "issue_title": "MRG fix bincount mess I made in kmeans.",
  "issue_body": "This should clean up the stuff I pushed earlier.\ncc @ogrisel @gaelvaroquaux Could you have a brief look? What I pushed earlier is buggy but I didn't dare push again after so many failed fixes.\n",
  "pr_number": 32403,
  "pr_title": "Move test from test_multiclass to test_base",
  "gold_patch": "diff --git a/sklearn/tests/test_base.py b/sklearn/tests/test_base.py\nindex 97a14f6a9ca34..11e0810fbfca8 100644\n--- a/sklearn/tests/test_base.py\n+++ b/sklearn/tests/test_base.py\n@@ -27,7 +27,7 @@\n from sklearn.metrics import get_scorer\n from sklearn.model_selection import GridSearchCV, KFold\n from sklearn.pipeline import Pipeline\n-from sklearn.preprocessing import StandardScaler\n+from sklearn.preprocessing import LabelEncoder, StandardScaler\n from sklearn.svm import SVC, SVR\n from sklearn.tree import DecisionTreeClassifier, DecisionTreeRegressor\n from sklearn.utils._mocking import MockDataFrame\n@@ -237,6 +237,22 @@ def test_clone_class_rather_than_instance():\n         clone(MyEstimator)\n \n \n+def test_conditional_attrs_not_in_dir():\n+    # Test that __dir__ includes only relevant attributes. #28558\n+\n+    encoder = LabelEncoder()\n+    assert \"set_output\" not in dir(encoder)\n+\n+    scalar = StandardScaler()\n+    assert \"set_output\" in dir(scalar)\n+\n+    svc = SVC(probability=False)\n+    assert \"predict_proba\" not in dir(svc)\n+\n+    svc.probability = True\n+    assert \"predict_proba\" in dir(svc)\n+\n+\n def test_repr():\n     # Smoke test the repr of the base estimator.\n     my_estimator = MyEstimator()\ndiff --git a/sklearn/tests/test_multiclass.py b/sklearn/tests/test_multiclass.py\nindex f67cbbcc5f7bb..66bbb039606f5 100644\n--- a/sklearn/tests/test_multiclass.py\n+++ b/sklearn/tests/test_multiclass.py\n@@ -29,7 +29,6 @@\n from sklearn.naive_bayes import MultinomialNB\n from sklearn.neighbors import KNeighborsClassifier\n from sklearn.pipeline import Pipeline, make_pipeline\n-from sklearn.preprocessing import LabelEncoder, StandardScaler\n from sklearn.svm import SVC, LinearSVC\n from sklearn.tree import DecisionTreeClassifier, DecisionTreeRegressor\n from sklearn.utils import (\n@@ -83,22 +82,6 @@ def test_check_classification_targets():\n         check_classification_targets(y)\n \n \n-def test_conditional_attrs_not_in_dir():\n-    # Test that __dir__ includes only relevant attributes. #28558\n-\n-    encoder = LabelEncoder()\n-    assert \"set_output\" not in dir(encoder)\n-\n-    scalar = StandardScaler()\n-    assert \"set_output\" in dir(scalar)\n-\n-    svc = SVC(probability=False)\n-    assert \"predict_proba\" not in dir(svc)\n-\n-    svc.probability = True\n-    assert \"predict_proba\" in dir(svc)\n-\n-\n def test_ovr_ties():\n     \"\"\"Check that ties-breaking matches np.argmax behavior\n \n",
  "fail_to_pass": [
    "test_conditional_attrs_not_in_dir"
  ],
  "pass_to_pass": [],
  "relevant_files": [
    "sklearn/tests/test_base.py",
    "sklearn/tests/test_multiclass.py"
  ],
  "difficulty": "medium",
  "created_at": "2025-10-06T11:20:44Z",
  "pr_url": "https://github.com/scikit-learn/scikit-learn/pull/32403",
  "issue_url": "https://github.com/scikit-learn/scikit-learn/pull/1234"
}