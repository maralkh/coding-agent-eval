{
  "id": "scikit-learn__scikit-learn-30406",
  "repo": "scikit-learn/scikit-learn",
  "base_commit": "c9fa7d4d2662ff0ef22cdcb0bd50d3a98c58a679",
  "issue_number": 30364,
  "issue_title": "Expose `verbose_feature_names_out` in `make_union`",
  "issue_body": "### Describe the workflow you want to enable\r\n\r\n```python\r\nfrom sklearn.pipeline import make_union\r\n\r\nfeature_union = make_union(..., verbose_feature_names_out=False)\r\n```\r\n\r\n### Describe your proposed solution\r\n\r\nAdd a keyword arg like in `make_column_transformer`\r\n\r\n### Describe alternatives you've considered, if relevant\r\n\r\nExplicitly defining with `FeatureUnion`\r\n\r\n### Additional context\r\n\r\nWould be a convenience ",
  "pr_number": 30406,
  "pr_title": "ENH Expose verbose_feature_names_out in make_union",
  "gold_patch": "diff --git a/doc/whats_new/upcoming_changes/sklearn.pipeline/30406.enhancement.rst b/doc/whats_new/upcoming_changes/sklearn.pipeline/30406.enhancement.rst\nnew file mode 100644\nindex 0000000000000..a1b6ac60078eb\n--- /dev/null\n+++ b/doc/whats_new/upcoming_changes/sklearn.pipeline/30406.enhancement.rst\n@@ -0,0 +1,4 @@\n+- Expose the ``verbose_feature_names_out`` argument in the\n+  :func:`pipeline.make_union` function, allowing users to control\n+  feature name uniqueness in the :class:`pipeline.FeatureUnion`.\n+  By :user:`Abhijeetsingh Meena <Ethan0456>`.\ndiff --git a/sklearn/pipeline.py b/sklearn/pipeline.py\nindex 9ff8a3549ef28..24b988a83a0ab 100644\n--- a/sklearn/pipeline.py\n+++ b/sklearn/pipeline.py\n@@ -2114,7 +2114,9 @@ def get_metadata_routing(self):\n         return router\n \n \n-def make_union(*transformers, n_jobs=None, verbose=False):\n+def make_union(\n+    *transformers, n_jobs=None, verbose=False, verbose_feature_names_out=True\n+):\n     \"\"\"Construct a :class:`FeatureUnion` from the given transformers.\n \n     This is a shorthand for the :class:`FeatureUnion` constructor; it does not\n@@ -2140,6 +2142,10 @@ def make_union(*transformers, n_jobs=None, verbose=False):\n         If True, the time elapsed while fitting each transformer will be\n         printed as it is completed.\n \n+    verbose_feature_names_out : bool, default=True\n+        If True, the feature names generated by `get_feature_names_out` will\n+        include prefixes derived from the transformer names.\n+\n     Returns\n     -------\n     f : FeatureUnion\n@@ -2159,4 +2165,9 @@ def make_union(*transformers, n_jobs=None, verbose=False):\n      FeatureUnion(transformer_list=[('pca', PCA()),\n                                    ('truncatedsvd', TruncatedSVD())])\n     \"\"\"\n-    return FeatureUnion(_name_estimators(transformers), n_jobs=n_jobs, verbose=verbose)\n+    return FeatureUnion(\n+        _name_estimators(transformers),\n+        n_jobs=n_jobs,\n+        verbose=verbose,\n+        verbose_feature_names_out=verbose_feature_names_out,\n+    )\ndiff --git a/sklearn/tests/test_pipeline.py b/sklearn/tests/test_pipeline.py\nindex d7a201f3abf6f..bc9f372421d82 100644\n--- a/sklearn/tests/test_pipeline.py\n+++ b/sklearn/tests/test_pipeline.py\n@@ -603,6 +603,44 @@ def test_make_union_kwargs():\n         make_union(pca, mock, transformer_weights={\"pca\": 10, \"Transf\": 1})\n \n \n+def create_mock_transformer(base_name, n_features=3):\n+    \"\"\"Helper to create a mock transformer with custom feature names.\"\"\"\n+    mock = Transf()\n+    mock.get_feature_names_out = lambda input_features: [\n+        f\"{base_name}{i}\" for i in range(n_features)\n+    ]\n+    return mock\n+\n+\n+def test_make_union_passes_verbose_feature_names_out():\n+    # Test that make_union passes verbose_feature_names_out\n+    # to the FeatureUnion.\n+    X = iris.data\n+    y = iris.target\n+\n+    pca = PCA()\n+    mock = create_mock_transformer(\"transf\")\n+    union = make_union(pca, mock, verbose_feature_names_out=False)\n+\n+    assert not union.verbose_feature_names_out\n+\n+    fu_union = make_union(pca, mock, verbose_feature_names_out=True)\n+    fu_union.fit(X, y)\n+\n+    assert_array_equal(\n+        [\n+            \"pca__pca0\",\n+            \"pca__pca1\",\n+            \"pca__pca2\",\n+            \"pca__pca3\",\n+            \"transf__transf0\",\n+            \"transf__transf1\",\n+            \"transf__transf2\",\n+        ],\n+        fu_union.get_feature_names_out(),\n+    )\n+\n+\n def test_pipeline_transform():\n     # Test whether pipeline works with a transformer at the end.\n     # Also test pipeline.transform and pipeline.inverse_transform\n",
  "fail_to_pass": [
    "test_make_union_passes_verbose_feature_names_out"
  ],
  "pass_to_pass": [],
  "relevant_files": [
    "sklearn/pipeline.py",
    "sklearn/tests/test_pipeline.py"
  ],
  "difficulty": "medium",
  "created_at": "2024-12-04T14:59:52Z",
  "pr_url": "https://github.com/scikit-learn/scikit-learn/pull/30406",
  "issue_url": "https://github.com/scikit-learn/scikit-learn/issues/30364"
}