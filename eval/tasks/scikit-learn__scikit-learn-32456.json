{
  "id": "scikit-learn__scikit-learn-32456",
  "repo": "scikit-learn/scikit-learn",
  "base_commit": "12468c57a94959ea853146a1043d6f2db4111a00",
  "issue_number": 1234,
  "issue_title": "MRG fix bincount mess I made in kmeans.",
  "issue_body": "This should clean up the stuff I pushed earlier.\ncc @ogrisel @gaelvaroquaux Could you have a brief look? What I pushed earlier is buggy but I didn't dare push again after so many failed fixes.\n",
  "pr_number": 32456,
  "pr_title": "MNT Clean-up deprecations for 1.8: Deprecation of copy_X in TheilSenRegressor",
  "gold_patch": "diff --git a/sklearn/linear_model/_theil_sen.py b/sklearn/linear_model/_theil_sen.py\nindex 008d205cef67f..c29158d053e26 100644\n--- a/sklearn/linear_model/_theil_sen.py\n+++ b/sklearn/linear_model/_theil_sen.py\n@@ -19,7 +19,7 @@\n from sklearn.exceptions import ConvergenceWarning\n from sklearn.linear_model._base import LinearModel\n from sklearn.utils import check_random_state\n-from sklearn.utils._param_validation import Hidden, Interval, StrOptions\n+from sklearn.utils._param_validation import Interval\n from sklearn.utils.parallel import Parallel, delayed\n from sklearn.utils.validation import validate_data\n \n@@ -224,13 +224,6 @@ class TheilSenRegressor(RegressorMixin, LinearModel):\n         Whether to calculate the intercept for this model. If set\n         to false, no intercept will be used in calculations.\n \n-    copy_X : bool, default=True\n-        If True, X will be copied; else, it may be overwritten.\n-\n-        .. deprecated:: 1.6\n-            `copy_X` was deprecated in 1.6 and will be removed in 1.8.\n-            It has no effect as a copy is always made.\n-\n     max_subpopulation : int, default=1e4\n         Instead of computing with a set of cardinality 'n choose k', where n is\n         the number of samples and k is the number of subsamples (at least\n@@ -327,7 +320,6 @@ class TheilSenRegressor(RegressorMixin, LinearModel):\n \n     _parameter_constraints: dict = {\n         \"fit_intercept\": [\"boolean\"],\n-        \"copy_X\": [\"boolean\", Hidden(StrOptions({\"deprecated\"}))],\n         # target_type should be Integral but can accept Real for backward compatibility\n         \"max_subpopulation\": [Interval(Real, 1, None, closed=\"left\")],\n         \"n_subsamples\": [None, Integral],\n@@ -342,7 +334,6 @@ def __init__(\n         self,\n         *,\n         fit_intercept=True,\n-        copy_X=\"deprecated\",\n         max_subpopulation=1e4,\n         n_subsamples=None,\n         max_iter=300,\n@@ -352,7 +343,6 @@ def __init__(\n         verbose=False,\n     ):\n         self.fit_intercept = fit_intercept\n-        self.copy_X = copy_X\n         self.max_subpopulation = max_subpopulation\n         self.n_subsamples = n_subsamples\n         self.max_iter = max_iter\n@@ -414,14 +404,6 @@ def fit(self, X, y):\n         self : returns an instance of self.\n             Fitted `TheilSenRegressor` estimator.\n         \"\"\"\n-        if self.copy_X != \"deprecated\":\n-            warnings.warn(\n-                \"`copy_X` was deprecated in 1.6 and will be removed in 1.8 since it \"\n-                \"has no effect internally. Simply leave this parameter to its default \"\n-                \"value to avoid this warning.\",\n-                FutureWarning,\n-            )\n-\n         random_state = check_random_state(self.random_state)\n         X, y = validate_data(self, X, y, y_numeric=True)\n         n_samples, n_features = X.shape\ndiff --git a/sklearn/linear_model/tests/test_theil_sen.py b/sklearn/linear_model/tests/test_theil_sen.py\nindex c96f771b65cf4..fe8f4befb6598 100644\n--- a/sklearn/linear_model/tests/test_theil_sen.py\n+++ b/sklearn/linear_model/tests/test_theil_sen.py\n@@ -294,11 +294,3 @@ def test_less_samples_than_features():\n     theil_sen = TheilSenRegressor(fit_intercept=True, random_state=0).fit(X, y)\n     y_pred = theil_sen.predict(X)\n     assert_array_almost_equal(y_pred, y, 12)\n-\n-\n-# TODO(1.8): Remove\n-def test_copy_X_deprecated():\n-    X, y, _, _ = gen_toy_problem_1d()\n-    theil_sen = TheilSenRegressor(copy_X=True, random_state=0)\n-    with pytest.warns(FutureWarning, match=\"`copy_X` was deprecated\"):\n-        theil_sen.fit(X, y)\n",
  "fail_to_pass": [],
  "pass_to_pass": [],
  "relevant_files": [
    "sklearn/linear_model/_theil_sen.py",
    "sklearn/linear_model/tests/test_theil_sen.py"
  ],
  "difficulty": "medium",
  "created_at": "2025-10-09T12:59:30Z",
  "pr_url": "https://github.com/scikit-learn/scikit-learn/pull/32456",
  "issue_url": "https://github.com/scikit-learn/scikit-learn/pull/1234"
}