{
  "id": "scikit-learn__scikit-learn-32521",
  "repo": "scikit-learn/scikit-learn",
  "base_commit": "b65c6f0b9f40ebdbe9e44007f8387f9d145abaee",
  "issue_number": 1234,
  "issue_title": "MRG fix bincount mess I made in kmeans.",
  "issue_body": "This should clean up the stuff I pushed earlier.\ncc @ogrisel @gaelvaroquaux Could you have a brief look? What I pushed earlier is buggy but I didn't dare push again after so many failed fixes.\n",
  "pr_number": 32521,
  "pr_title": "MNT Clean up deprecations for 1.8: fit_params",
  "gold_patch": "diff --git a/sklearn/model_selection/_plot.py b/sklearn/model_selection/_plot.py\nindex cb191a675fd59..16da45b03e65d 100644\n--- a/sklearn/model_selection/_plot.py\n+++ b/sklearn/model_selection/_plot.py\n@@ -488,7 +488,7 @@ def from_estimator(\n             random_state=random_state,\n             error_score=error_score,\n             return_times=False,\n-            fit_params=fit_params,\n+            params=fit_params,\n         )\n \n         viz = cls(\n@@ -864,7 +864,7 @@ def from_estimator(\n             pre_dispatch=pre_dispatch,\n             verbose=verbose,\n             error_score=error_score,\n-            fit_params=fit_params,\n+            params=fit_params,\n         )\n \n         viz = cls(\ndiff --git a/sklearn/model_selection/_validation.py b/sklearn/model_selection/_validation.py\nindex 1b50fc447ecd5..fb35d247fafb4 100644\n--- a/sklearn/model_selection/_validation.py\n+++ b/sklearn/model_selection/_validation.py\n@@ -54,35 +54,6 @@\n ]\n \n \n-def _check_params_groups_deprecation(fit_params, params, groups, version):\n-    \"\"\"A helper function to check deprecations on `groups` and `fit_params`.\n-\n-    # TODO(SLEP6): To be removed when set_config(enable_metadata_routing=False) is not\n-    # possible.\n-    \"\"\"\n-    if params is not None and fit_params is not None:\n-        raise ValueError(\n-            \"`params` and `fit_params` cannot both be provided. Pass parameters \"\n-            \"via `params`. `fit_params` is deprecated and will be removed in \"\n-            f\"version {version}.\"\n-        )\n-    elif fit_params is not None:\n-        warnings.warn(\n-            (\n-                \"`fit_params` is deprecated and will be removed in version {version}. \"\n-                \"Pass parameters via `params` instead.\"\n-            ),\n-            FutureWarning,\n-        )\n-        params = fit_params\n-\n-    params = {} if params is None else params\n-\n-    _check_groups_routing_disabled(groups)\n-\n-    return params\n-\n-\n # TODO(SLEP6): To be removed when set_config(enable_metadata_routing=False) is not\n # possible.\n def _check_groups_routing_disabled(groups):\n@@ -1446,7 +1417,6 @@ def _check_is_permutation(indices, n_samples):\n         \"random_state\": [\"random_state\"],\n         \"verbose\": [\"verbose\"],\n         \"scoring\": [StrOptions(set(get_scorer_names())), callable, None],\n-        \"fit_params\": [dict, None],\n         \"params\": [dict, None],\n     },\n     prefer_skip_nested_validation=False,  # estimator is not validated yet\n@@ -1463,7 +1433,6 @@ def permutation_test_score(\n     random_state=0,\n     verbose=0,\n     scoring=None,\n-    fit_params=None,\n     params=None,\n ):\n     \"\"\"Evaluate the significance of a cross-validated score with permutations.\n@@ -1558,13 +1527,6 @@ def permutation_test_score(\n         - `None`: the `estimator`'s\n           :ref:`default evaluation criterion <scoring_api_overview>` is used.\n \n-    fit_params : dict, default=None\n-        Parameters to pass to the fit method of the estimator.\n-\n-        .. deprecated:: 1.6\n-            This parameter is deprecated and will be removed in version 1.6. Use\n-            ``params`` instead.\n-\n     params : dict, default=None\n         Parameters to pass to the `fit` method of the estimator, the scorer\n         and the cv splitter.\n@@ -1624,7 +1586,8 @@ def permutation_test_score(\n     >>> print(f\"P-value: {pvalue:.3f}\")\n     P-value: 0.010\n     \"\"\"\n-    params = _check_params_groups_deprecation(fit_params, params, groups, \"1.8\")\n+    _check_groups_routing_disabled(groups)\n+    params = {} if params is None else params\n \n     X, y, groups = indexable(X, y, groups)\n \n@@ -1750,7 +1713,6 @@ def _shuffle(y, groups, random_state):\n         \"random_state\": [\"random_state\"],\n         \"error_score\": [StrOptions({\"raise\"}), Real],\n         \"return_times\": [\"boolean\"],\n-        \"fit_params\": [dict, None],\n         \"params\": [dict, None],\n     },\n     prefer_skip_nested_validation=False,  # estimator is not validated yet\n@@ -1772,7 +1734,6 @@ def learning_curve(\n     random_state=None,\n     error_score=np.nan,\n     return_times=False,\n-    fit_params=None,\n     params=None,\n ):\n     \"\"\"Learning curve.\n@@ -1892,13 +1853,6 @@ def learning_curve(\n     return_times : bool, default=False\n         Whether to return the fit and score times.\n \n-    fit_params : dict, default=None\n-        Parameters to pass to the fit method of the estimator.\n-\n-        .. deprecated:: 1.6\n-            This parameter is deprecated and will be removed in version 1.8. Use\n-            ``params`` instead.\n-\n     params : dict, default=None\n         Parameters to pass to the `fit` method of the estimator and to the scorer.\n \n@@ -1968,8 +1922,8 @@ def learning_curve(\n             \"An estimator must support the partial_fit interface \"\n             \"to exploit incremental learning\"\n         )\n-\n-    params = _check_params_groups_deprecation(fit_params, params, groups, \"1.8\")\n+    _check_groups_routing_disabled(groups)\n+    params = {} if params is None else params\n \n     X, y, groups = indexable(X, y, groups)\n \n@@ -2254,7 +2208,6 @@ def _incremental_fit_estimator(\n         \"pre_dispatch\": [Integral, str],\n         \"verbose\": [\"verbose\"],\n         \"error_score\": [StrOptions({\"raise\"}), Real],\n-        \"fit_params\": [dict, None],\n         \"params\": [dict, None],\n     },\n     prefer_skip_nested_validation=False,  # estimator is not validated yet\n@@ -2273,7 +2226,6 @@ def validation_curve(\n     pre_dispatch=\"all\",\n     verbose=0,\n     error_score=np.nan,\n-    fit_params=None,\n     params=None,\n ):\n     \"\"\"Validation curve.\n@@ -2372,13 +2324,6 @@ def validation_curve(\n \n         .. versionadded:: 0.20\n \n-    fit_params : dict, default=None\n-        Parameters to pass to the fit method of the estimator.\n-\n-        .. deprecated:: 1.6\n-            This parameter is deprecated and will be removed in version 1.8. Use\n-            ``params`` instead.\n-\n     params : dict, default=None\n         Parameters to pass to the estimator, scorer and cross-validation object.\n \n@@ -2425,7 +2370,9 @@ def validation_curve(\n     >>> print(f\"The average test accuracy is {test_scores.mean():.2f}\")\n     The average test accuracy is 0.81\n     \"\"\"\n-    params = _check_params_groups_deprecation(fit_params, params, groups, \"1.8\")\n+    _check_groups_routing_disabled(groups)\n+    params = {} if params is None else params\n+\n     X, y, groups = indexable(X, y, groups)\n \n     cv = check_cv(cv, y, classifier=is_classifier(estimator))\ndiff --git a/sklearn/model_selection/tests/test_validation.py b/sklearn/model_selection/tests/test_validation.py\nindex 6798b86ab8ffb..1ac11d8ccf716 100644\n--- a/sklearn/model_selection/tests/test_validation.py\n+++ b/sklearn/model_selection/tests/test_validation.py\n@@ -2464,35 +2464,6 @@ def test_cross_validate_return_indices(global_random_seed):\n # ======================================================\n \n \n-# TODO(1.8): remove `learning_curve`, `validation_curve` and `permutation_test_score`.\n-@pytest.mark.parametrize(\n-    \"func, extra_args\",\n-    [\n-        (learning_curve, {}),\n-        (permutation_test_score, {}),\n-        (validation_curve, {\"param_name\": \"alpha\", \"param_range\": np.array([1])}),\n-    ],\n-)\n-def test_fit_param_deprecation(func, extra_args):\n-    \"\"\"Check that we warn about deprecating `fit_params`.\"\"\"\n-    with pytest.warns(FutureWarning, match=\"`fit_params` is deprecated\"):\n-        func(\n-            estimator=ConsumingClassifier(), X=X, y=y, cv=2, fit_params={}, **extra_args\n-        )\n-\n-    with pytest.raises(\n-        ValueError, match=\"`params` and `fit_params` cannot both be provided\"\n-    ):\n-        func(\n-            estimator=ConsumingClassifier(),\n-            X=X,\n-            y=y,\n-            fit_params={},\n-            params={},\n-            **extra_args,\n-        )\n-\n-\n @pytest.mark.parametrize(\n     \"func, extra_args\",\n     [\n",
  "fail_to_pass": [],
  "pass_to_pass": [],
  "relevant_files": [
    "sklearn/model_selection/_plot.py",
    "sklearn/model_selection/_validation.py",
    "sklearn/model_selection/tests/test_validation.py"
  ],
  "difficulty": "medium",
  "created_at": "2025-10-17T09:13:03Z",
  "pr_url": "https://github.com/scikit-learn/scikit-learn/pull/32521",
  "issue_url": "https://github.com/scikit-learn/scikit-learn/pull/1234"
}