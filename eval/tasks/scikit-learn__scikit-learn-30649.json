{
  "id": "scikit-learn__scikit-learn-30649",
  "repo": "scikit-learn/scikit-learn",
  "base_commit": "2707099b23a0a8580731553629566c1182d26f48",
  "issue_number": 1234,
  "issue_title": "MRG fix bincount mess I made in kmeans.",
  "issue_body": "This should clean up the stuff I pushed earlier.\ncc @ogrisel @gaelvaroquaux Could you have a brief look? What I pushed earlier is buggy but I didn't dare push again after so many failed fixes.\n",
  "pr_number": 30649,
  "pr_title": "FIX Validate estimators in Voting{Classifier,Regressor}",
  "gold_patch": "diff --git a/doc/whats_new/upcoming_changes/sklearn.ensemble/30649.fix.rst b/doc/whats_new/upcoming_changes/sklearn.ensemble/30649.fix.rst\nnew file mode 100644\nindex 0000000000000..43ad381fb5ca8\n--- /dev/null\n+++ b/doc/whats_new/upcoming_changes/sklearn.ensemble/30649.fix.rst\n@@ -0,0 +1,2 @@\n+- :class:`ensemble.VotingClassifier` and :class:`ensemble.VotingRegressor`\n+  validate `estimators` to make sure it is a list of tuples. By `Thomas Fan`_.\ndiff --git a/sklearn/ensemble/_base.py b/sklearn/ensemble/_base.py\nindex db5a0944a72c3..e04645eec174f 100644\n--- a/sklearn/ensemble/_base.py\n+++ b/sklearn/ensemble/_base.py\n@@ -211,7 +211,10 @@ def __init__(self, estimators):\n         self.estimators = estimators\n \n     def _validate_estimators(self):\n-        if len(self.estimators) == 0:\n+        if len(self.estimators) == 0 or not all(\n+            isinstance(item, (tuple, list)) and isinstance(item[0], str)\n+            for item in self.estimators\n+        ):\n             raise ValueError(\n                 \"Invalid 'estimators' attribute, 'estimators' should be a \"\n                 \"non-empty list of (string, estimator) tuples.\"\ndiff --git a/sklearn/ensemble/tests/test_voting.py b/sklearn/ensemble/tests/test_voting.py\nindex bb0d34bcd7d16..797dd9bdd5989 100644\n--- a/sklearn/ensemble/tests/test_voting.py\n+++ b/sklearn/ensemble/tests/test_voting.py\n@@ -52,6 +52,14 @@\n             {\"estimators\": []},\n             \"Invalid 'estimators' attribute, 'estimators' should be a non-empty list\",\n         ),\n+        (\n+            {\"estimators\": [LogisticRegression()]},\n+            \"Invalid 'estimators' attribute, 'estimators' should be a non-empty list\",\n+        ),\n+        (\n+            {\"estimators\": [(213, LogisticRegression())]},\n+            \"Invalid 'estimators' attribute, 'estimators' should be a non-empty list\",\n+        ),\n         (\n             {\"estimators\": [(\"lr\", LogisticRegression())], \"weights\": [1, 2]},\n             \"Number of `estimators` and weights must be equal\",\n",
  "fail_to_pass": [],
  "pass_to_pass": [],
  "relevant_files": [
    "sklearn/ensemble/_base.py",
    "sklearn/ensemble/tests/test_voting.py"
  ],
  "difficulty": "medium",
  "created_at": "2025-01-15T03:47:58Z",
  "pr_url": "https://github.com/scikit-learn/scikit-learn/pull/30649",
  "issue_url": "https://github.com/scikit-learn/scikit-learn/pull/1234"
}