{
  "id": "scikit-learn__scikit-learn-32887",
  "repo": "scikit-learn/scikit-learn",
  "base_commit": "7f0900c265936eac9a89bba37eb19ee66208d46a",
  "issue_number": 1234,
  "issue_title": "MRG fix bincount mess I made in kmeans.",
  "issue_body": "This should clean up the stuff I pushed earlier.\ncc @ogrisel @gaelvaroquaux Could you have a brief look? What I pushed earlier is buggy but I didn't dare push again after so many failed fixes.\n",
  "pr_number": 32887,
  "pr_title": "FIX: Tooltip position using CSS anchor positioning",
  "gold_patch": "diff --git a/doc/whats_new/upcoming_changes/sklearn.utils/32887.fix.rst b/doc/whats_new/upcoming_changes/sklearn.utils/32887.fix.rst\nnew file mode 100644\nindex 0000000000000..765e4f62b9a58\n--- /dev/null\n+++ b/doc/whats_new/upcoming_changes/sklearn.utils/32887.fix.rst\n@@ -0,0 +1,6 @@\n+- The parameter table in the HTML representation of all scikit-learn\n+  estimators inheritiging from :class:`base.BaseEstimator`, displays\n+  each parameter documentation as a tooltip. The last tooltip of a\n+  parameter in the last table of any HTML representation was partially hidden.\n+  This issue has been fixed.\n+  By :user:`Dea Mar\u00eda L\u00e9on <DeaMariaLeon>`\ndiff --git a/sklearn/utils/_repr_html/params.css b/sklearn/utils/_repr_html/params.css\nindex 10d1a0a79a68b..c20acdd8d243c 100644\n--- a/sklearn/utils/_repr_html/params.css\n+++ b/sklearn/utils/_repr_html/params.css\n@@ -83,6 +83,14 @@ a.param-doc-link:visited {\n     padding: .5em;\n }\n \n+@supports(anchor-name: --doc-link) {\n+    a.param-doc-link,\n+    a.param-doc-link:link,\n+    a.param-doc-link:visited {\n+    anchor-name: --doc-link;\n+    }\n+}\n+\n /* \"hack\" to make the entire area of the cell containing the link clickable */\n a.param-doc-link::before {\n     position: absolute;\n@@ -109,6 +117,14 @@ a.param-doc-link::before {\n     border: thin solid var(--sklearn-color-unfitted-level-3);\n }\n \n+@supports(position-area: center right) {\n+    .param-doc-description {\n+    position-area: center right;\n+    position: fixed;\n+    margin-left: 0;\n+    }\n+}\n+\n /* Fitted state for parameter tooltips */\n .fitted .param-doc-description {\n     /* fitted */\ndiff --git a/sklearn/utils/_repr_html/params.py b/sklearn/utils/_repr_html/params.py\nindex 011dde246198d..2bc523f7d6e17 100644\n--- a/sklearn/utils/_repr_html/params.py\n+++ b/sklearn/utils/_repr_html/params.py\n@@ -89,9 +89,12 @@ def _params_html_repr(params):\n \n     PARAM_AVAILABLE_DOC_LINK_TEMPLATE = \"\"\"\n         <a class=\"param-doc-link\"\n+            style=\"anchor-name: --doc-link-{param_name};\"\n             rel=\"noreferrer\" target=\"_blank\" href=\"{link}\">\n             {param_name}\n-            <span class=\"param-doc-description\">{param_description}</span>\n+            <span class=\"param-doc-description\"\n+            style=\"position-anchor: --doc-link-{param_name};\">\n+            {param_description}</span>\n         </a>\n     \"\"\"\n     estimator_class_docs = inspect.getdoc(params.estimator_class)\ndiff --git a/sklearn/utils/_repr_html/tests/test_params.py b/sklearn/utils/_repr_html/tests/test_params.py\nindex a2fe8d54c0a6d..4cbd1302ee2dd 100644\n--- a/sklearn/utils/_repr_html/tests/test_params.py\n+++ b/sklearn/utils/_repr_html/tests/test_params.py\n@@ -108,10 +108,13 @@ class MockEstimator:\n     html_param_a = (\n         r'<td class=\"param\">'\n         r'\\s*<a class=\"param-doc-link\"'\n+        r'\\s*style=\"anchor-name: --doc-link-a;\"'\n         r'\\s*rel=\"noreferrer\" target=\"_blank\"'\n         r'\\shref=\"mock_module\\.MockEstimator\\.html#:~:text=a,-int\">'\n         r\"\\s*a\"\n-        r'\\s*<span class=\"param-doc-description\">a: int<br><br>'\n+        r'\\s*<span class=\"param-doc-description\"'\n+        r'\\s*style=\"position-anchor: --doc-link-a;\">\\s*a:'\n+        r\"\\sint<br><br>\"\n         r\"Description of a\\.</span>\"\n         r\"\\s*</a>\"\n         r\"\\s*</td>\"\n@@ -120,10 +123,13 @@ class MockEstimator:\n     html_param_b = (\n         r'<td class=\"param\">'\n         r'.*<a class=\"param-doc-link\"'\n+        r'\\s*style=\"anchor-name: --doc-link-b;\"'\n         r'\\s*rel=\"noreferrer\" target=\"_blank\"'\n         r'\\shref=\"mock_module\\.MockEstimator\\.html#:~:text=b,-str\">'\n         r\"\\s*b\"\n-        r'\\s*<span class=\"param-doc-description\">b: str<br><br></span>'\n+        r'\\s*<span class=\"param-doc-description\"'\n+        r'\\s*style=\"position-anchor: --doc-link-b;\">\\s*b:'\n+        r\"\\sstr<br><br></span>\"\n         r\"\\s*</a>\"\n         r\"\\s*</td>\"\n     )\n",
  "fail_to_pass": [],
  "pass_to_pass": [],
  "relevant_files": [
    "sklearn/utils/_repr_html/params.py",
    "sklearn/utils/_repr_html/tests/test_params.py"
  ],
  "difficulty": "hard",
  "created_at": "2025-12-11T13:46:16Z",
  "pr_url": "https://github.com/scikit-learn/scikit-learn/pull/32887",
  "issue_url": "https://github.com/scikit-learn/scikit-learn/pull/1234"
}