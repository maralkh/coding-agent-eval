{
  "id": "scikit-learn__scikit-learn-32525",
  "repo": "scikit-learn/scikit-learn",
  "base_commit": "c6b547c57e79cb72bb19b5e032ad2a2f028bdfea",
  "issue_number": 1234,
  "issue_title": "MRG fix bincount mess I made in kmeans.",
  "issue_body": "This should clean up the stuff I pushed earlier.\ncc @ogrisel @gaelvaroquaux Could you have a brief look? What I pushed earlier is buggy but I didn't dare push again after so many failed fixes.\n",
  "pr_number": 32525,
  "pr_title": "MNT Clean up deprecations for 1.8: generate_only in check_estimator",
  "gold_patch": "diff --git a/sklearn/tests/test_common.py b/sklearn/tests/test_common.py\nindex ec83b79d8c321..e51a31419b522 100644\n--- a/sklearn/tests/test_common.py\n+++ b/sklearn/tests/test_common.py\n@@ -10,7 +10,6 @@\n import re\n import warnings\n from functools import partial\n-from inspect import isgenerator\n from itertools import chain\n \n import pytest\n@@ -123,17 +122,6 @@ def test_estimators(estimator, check, request):\n         check(estimator)\n \n \n-# TODO(1.8): remove test when generate_only is removed\n-def test_check_estimator_generate_only_deprecation():\n-    \"\"\"Check that check_estimator with generate_only=True raises a deprecation\n-    warning.\"\"\"\n-    with pytest.warns(FutureWarning, match=\"`generate_only` is deprecated in 1.6\"):\n-        all_instance_gen_checks = check_estimator(\n-            LogisticRegression(), generate_only=True\n-        )\n-    assert isgenerator(all_instance_gen_checks)\n-\n-\n @pytest.mark.filterwarnings(\n     \"ignore:Since version 1.0, it is not needed to import \"\n     \"enable_hist_gradient_boosting anymore\"\ndiff --git a/sklearn/utils/estimator_checks.py b/sklearn/utils/estimator_checks.py\nindex d8cd13848a09d..6a704a7451f11 100644\n--- a/sklearn/utils/estimator_checks.py\n+++ b/sklearn/utils/estimator_checks.py\n@@ -691,7 +691,6 @@ def _checks_generator(estimators, legacy, expected_failed_checks):\n \n @validate_params(\n     {\n-        \"generate_only\": [\"boolean\"],\n         \"legacy\": [\"boolean\"],\n         \"expected_failed_checks\": [dict, None],\n         \"on_skip\": [StrOptions({\"warn\"}), None],\n@@ -702,7 +701,6 @@ def _checks_generator(estimators, legacy, expected_failed_checks):\n )\n def check_estimator(\n     estimator=None,\n-    generate_only=False,\n     *,\n     legacy: bool = True,\n     expected_failed_checks: dict[str, str] | None = None,\n@@ -735,18 +733,6 @@ def check_estimator(\n     estimator : estimator object\n         Estimator instance to check.\n \n-    generate_only : bool, default=False\n-        When `False`, checks are evaluated when `check_estimator` is called.\n-        When `True`, `check_estimator` returns a generator that yields\n-        (estimator, check) tuples. The check is run by calling\n-        `check(estimator)`.\n-\n-        .. versionadded:: 0.22\n-\n-        .. deprecated:: 1.6\n-            `generate_only` will be removed in 1.8. Use\n-            :func:`~sklearn.utils.estimator_checks.estimator_checks_generator` instead.\n-\n     legacy : bool, default=True\n         Whether to include legacy checks. Over time we remove checks from this category\n         and move them into their specific category.\n@@ -823,17 +809,6 @@ def callback(\n                 \"expected_to_fail_reason\": expected_to_fail_reason,\n             }\n \n-    estimator_checks_generator : generator\n-        Generator that yields (estimator, check) tuples. Returned when\n-        `generate_only=True`.\n-\n-        ..\n-            TODO(1.8): remove return value\n-\n-        .. deprecated:: 1.6\n-            ``generate_only`` will be removed in 1.8. Use\n-            :func:`~sklearn.utils.estimator_checks.estimator_checks_generator` instead.\n-\n     Raises\n     ------\n     Exception\n@@ -870,18 +845,6 @@ def callback(\n \n     name = type(estimator).__name__\n \n-    # TODO(1.8): remove generate_only\n-    if generate_only:\n-        warnings.warn(\n-            \"`generate_only` is deprecated in 1.6 and will be removed in 1.8. \"\n-            \"Use :func:`~sklearn.utils.estimator_checks.estimator_checks_generator` \"\n-            \"instead.\",\n-            FutureWarning,\n-        )\n-        return estimator_checks_generator(\n-            estimator, legacy=legacy, expected_failed_checks=None, mark=\"skip\"\n-        )\n-\n     test_results = []\n \n     for estimator, check in estimator_checks_generator(\n",
  "fail_to_pass": [],
  "pass_to_pass": [],
  "relevant_files": [
    "sklearn/tests/test_common.py",
    "sklearn/utils/estimator_checks.py"
  ],
  "difficulty": "medium",
  "created_at": "2025-10-17T12:31:03Z",
  "pr_url": "https://github.com/scikit-learn/scikit-learn/pull/32525",
  "issue_url": "https://github.com/scikit-learn/scikit-learn/pull/1234"
}